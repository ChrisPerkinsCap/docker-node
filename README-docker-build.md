# Docker managed node.js Projects

> This project has a collection of Dockerfiles and docker-compose.yaml files that help to automate the generation, testing and packaging of node.js applications into docker images.

## HOW TO GENERATE A NEW node.js BASED APPLICATION

#### FILE TREE
```bash
/(project-root)
├── README.md
├── cleanup-docker.sh
├── node-init.Dockerfile
├── node-init.yaml
├── node.yaml
└── project
```

### FILES USED
 
##### node-init.Dockerfile
> Builds a docker image with npm and express-generator that are used to generate the filebase for a given project

##### node-init.yaml
>This is a docker-compose file. It isn't composible with SWARM it's not intended to run applications on a server. It's soul purpose is to run a container based on the image generated by the node-init.Dockerfile which generates a codebase and then dies leaving the code base behind for development.

##### .env.init
> This is an ENVIRONMENT_VARIABLE file that is used to set up the configuration of the application codebase that should be generated by npm or by express.
>
>The variables set in this file are injected into the node-init.yaml file as it is run.
>
>node-init.yml injects some of those variables into the image at build time, others are used for naming, defining and running the image and the container.

#### RUN THE BUILD

> From within the project root directory execute the following command:

```bash
docker-compose --env-file ./.env.init -f ./node-init.yaml up -d
```

> The project code base will be generated according to the parameters set in the .env.init file and can be found in the project/ directory.
>
>For example for an express generated code base:

```bash
/(project-root)
├── README.md
├── cleanup-docker.sh
├── node-init.Dockerfile
├── node-init.yaml
├── node.yaml
└── project
    └── my-express-app
        ├── app.js
        ├── bin
        │   └── www
        ├── package.json
        ├── public
        │   ├── images
        │   ├── javascripts
        │   └── stylesheets
        │       └── style.css
        ├── routes
        │   ├── index.js
        │   └── users.js
        └── views
            ├── error.pug
            ├── index.pug
            └── layout.pug
```
> Or a react application:

```bash
/(project-root)
├── README-docker-build.md
├── cleanup-docker.sh
├── node-init.Dockerfile
├── node-init.yaml
├── node.yaml
└── projects
    ├── README-project.md
    └── my-react-app
        ├── README.md
        ├── node_modules
        ├── package.json
        ├── public
        ├── src
        └── yarn.lock
```